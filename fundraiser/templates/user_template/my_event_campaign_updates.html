{% extends 'user_template/my_event_dashboard.html' %}

{% block extra_style %}
{% endblock %}


{% block body %}
<main class="main_min_heg">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="card mt-5">
                    <div class="card_header">
                        <div class="row">
                            <div class="col-sm-12 col-md-9">
                                <h5 style="color: #fff;">Updates</h5>
                                <p class="mb-0" style="color: #fff;font-size: 14px;">This is a great way to connect with
                                    them, let them know how your campaign is doing and get them to share it on their
                                    platforms.</p>
                            </div>
                            <div class="col-sm-12 col-md-3">
                                <div class="d-flex align-items-center h-100  justify-content-end">
                                    <button type="button" class="withdrawal_btn" data-toggle="modal"
                                        data-target="#edit_update">Post An Update</button>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="mt-5">
                        <div class="m-auto" style="width: 95%">
                            <div class="table_parent">
                                <table class="table mt-3 custom_css_table">
                                    <thead class="text-center">
                                        <th scope="col" class="border-0 font-weight-bold">Date</th>
                                        <th scope="col" class="border-0 font-weight-bold"> Update Title </th>
                                        <th scope="col" class="border-0 font-weight-bold"> Action </th>
                                    </thead>
                                    <tbody class="text-center">
                                        {% for update in instance_EventUpdates %}
                                        <tr>
                                            <td>{{update.created_at}}</td>
                                            <td>{{update.title}}</td>
                                            <td>
                                                <a href="{% url 'my_event_campaign_updates_delete' url_text=instance_Event.url_text id=update.id %}"><i class="fa fa-trash danger" aria-hidden="true"></i></a>
                                            </td>
                                        </tr>
                                       {% endfor %}
                                    </tbody>
                                </table>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    </div>
</main>
{% endblock %}

{% block model_popup %}
<div class="modal fade" id="edit_update" role="dialog" aria-labelledby="edit_updateTittle" aria-hidden="false"
    data-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable  modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header border-0 pl-4  pb-1">
                <h5 class="modal-title" id="edit_updateTittle">Post an Article</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body withdrawal-modal-body pt-0 pb-0">
                <form class="jss632" method="POST">
                    {% csrf_token %}
                    <div class="jss550 jss551 jss553">
                        <p class="jss515 jss524">Title</p>
                        <div class="jss550">
                            <div class="jss567 jss554 jss558 jss568 jss555 class_tittle mb-1">
                                {{EventUpdates_Form.title}}
                                <!-- <input  class="jss577 jss562"  type="text" value="" required="required">                         -->
                            </div>
                            <span class="error" id="id_tittle_error">{{EventUpdates_Form.errors.title}}</span>
                        </div>
                    </div>
                    <div class="jss550 jss553 mt-0 mb-0">
                        <div class="jss550">
                            <div class="jss567 jss554 jss568 jss555" id="id_about_update">
                                <textarea class="jss577 jss562 w-100" id="id_about" name="about" style="display: none;"></textarea>

                                <div id="standalone-container">
                                <div id="toolbar-container">
                                  <span class="ql-formats">
                                    <select class="ql-font"></select>
                                    <select class="ql-size"></select>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-bold"></button>
                                    <button class="ql-italic"></button>
                                    <button class="ql-underline"></button>
                                    <button class="ql-strike"></button>
                                  </span>
                                  <span class="ql-formats">
                                    <select class="ql-color"></select>
                                    <select class="ql-background"></select>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-script" value="sub"></button>
                                    <button class="ql-script" value="super"></button>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-header" value="1"></button>
                                    <button class="ql-header" value="2"></button>
                                    <button class="ql-blockquote"></button>
                                    <button class="ql-code-block"></button>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-list" value="ordered"></button>
                                    <button class="ql-list" value="bullet"></button>
                                    <button class="ql-indent" value="-1"></button>
                                    <button class="ql-indent" value="+1"></button>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-direction" value="rtl"></button>
                                    <select class="ql-align"></select>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-link"></button>
                                    <button class="ql-image"></button>
                                    <button class="ql-video"></button>
                                    <button class="ql-formula"></button>
                                  </span>
                                  <span class="ql-formats">
                                    <button class="ql-clean"></button>
                                  </span>
                                </div>
                                <div id="editor-container"></div>
                              </div>
                            </div>
                            <span class="error" id="id_update_error"></span>
                        </div>
                    </div>
                    <div>
                          <label class="jss867">
                          <span class="jss892 jss886 jss882 jss895 jss899">
                          <span class="jss891">
                            <svg class="jss789 svg_show" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation">
                                <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z">
                                </path>
                            </svg>
                            <svg class="jss789 svg_hide" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation">
                                <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z">
                                </path>
                              </svg>
                            <input class="jss885" type="checkbox" id="id_send_email"  name="send_email"  ></span><span class="jss934"></span>
                          </span>
                                              <span class="jss798 jss807 jss872">
                                <p style="font-size: 0.8rem; width: 100%; margin: 10px 0px;"> Notify all supporters about this post </a></p>
                            </span>
                          </label>
                        </div>
                    <button name="form_type" value="Updates" class="jss892 jss901 jss912 jss913 jss915 jss916 jss926 jss633"
                        id="Edit_Updates" type="submit">
                        <span class="jss902">Post Update</span>
                        <span class="jss934"></span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_script %}
<script>

    $(document).ready(function () {
        var dt = $('.custom_css_table').DataTable({
            "ordering": false,
            "info": false,
            "bLengthChange": false,
            "searching": false
        });
    });
</script>

<!-- Editor -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css" />

<link rel="stylesheet" href="/static/editor/quill.snow.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script src="/static/editor/quill.min.js"></script>

<script>
  var quill = new Quill('#editor-container', {
    modules: {
      formula: true,
      syntax: true,
      toolbar: '#toolbar-container'
    },
    theme: 'snow'
  });

  quill.on('text-change', function(delta, oldDelta, source) {
            console.log(quill.container.firstChild.innerHTML)
            $('#id_about').text(quill.container.firstChild.innerHTML);
        });
 
</script>
{% endblock %}