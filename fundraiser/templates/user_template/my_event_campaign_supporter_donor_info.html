{% extends 'user_template/my_event_dashboard.html' %}

{% block extra_style %}
{% endblock %}


{% block body %}
<main class="main_min_heg">
    <div class="container">
        <div class="row mt-3 mb-3 justify-content-center align-items-center  position-relative">
            <div class="col-md-6">
                <h4 class="mb-0">Donations ({{instance_EventGroupMembers|length}})</h4>
            </div>
            <div class="col-md-6 text-right position_unset">
                <div class="navbar justify-content-end position_unset">
                    <ul class="Campaign_action_right  navbar-nav position_unset">
                        <li class="nav-item" id="download"></li>
                        <li class="nav-item" id="print-assets"></li>
                        <li class="nav-item"><a href="#" class="nav-link"><i data-toggle="modal" data-target="#view_grid" aria-hidden="true" class="fa fa-th" aria-hidden="true"></i></a></li>  
                        <li class="nav-item dropdown mr-4 right_zero position_unset">
                            <a class="nav-link dropdown-toggle " href="#" id="navbarDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="18px"
                                    height="18px" viewBox="0 0 459 459" style="enable-background:new 0 0 459 459;"
                                    xml:space="preserve">
                                    <g>
                                        <g id="filter">
                                            <path
                                                d="M178.5,382.5h102v-51h-102V382.5z M0,76.5v51h459v-51H0z M76.5,255h306v-51h-306V255z" />
                                        </g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                    <g>
                                    </g>
                                </svg>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right new_dropdown w-100"
                                aria-labelledby="navbarDropdown">
                                <div class="container-fluid">
                                    <form class="row">
                                        <div class="col-sm-12">
                                            <h5 class="mb-0">Filters <span><button type="clear"
                                                        class="colr_yellow btn_none"><span class="jss237 jss231"
                                                            style="font-size: 15px;">Reset</span></button></span></h5>

                                        </div>

                                        <div class="col-sm-12 col-md-4">
                                            <div class="jss550 jss551 jss553 ">
                                                <div class="jss550">
                                                    <div class="">
                                                        <p class="jss798 jss807 ">Date</p>
                                                        <div class="jss550 w-100">
                                                            <div class="jss567 jss554 jss558 jss568 jss555 select2_con">
                                                                <select class="select2_con_sec">
                                                                    <option value="">All</option>
                                                                    {% for group_user in instance_EventGroupMembers %}
                                                                    <option value="{{group_user.created_at}}">{{group_user.created_at}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="jss550 jss551 jss553 ">
                                                    <div class="jss550">
                                                        <div class="">
                                                            <p class="jss798 jss807 ">Mobile</p>
                                                            <div class="jss550 w-100">
                                                                <div class="jss567 jss554 jss558 jss568 jss555 select2_con">
                                                                    <select class="select2_con_sec">
                                                                        <option value="">All</option>
                                                                        {% for group_user in instance_EventGroupMembers %}
                                                                        <option value="{{group_user.phone}}">{{group_user.phone}}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            
                                         
                                            
                                        </div>

                                        <div class="col-sm-12 col-md-4">
                                                <div class="jss550 jss551 jss553 ">
                                                        <div class="jss550">
                                                            <div class="">
                                                                <p class="jss798 jss807 ">Name</p>
                                                                <div class="jss550 w-100">
                                                                    <div class="jss567 jss554 jss558 jss568 jss555 select2_con">
                                                                        <select class="select2_con_sec">
                                                                            <option value="all">All</option>
                                                                            {% for group_user in instance_EventGroupMembers %}
                                                                        <option value="{{group_user.name}}">{{group_user.name}}</option>
                                                                        {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                            
                                            
                                        </div>

                                        <div class="col-sm-12 col-md-4">
                                            
                                                <div class="jss550 jss551 jss553 ">
                                                        <div class="jss550">
                                                            <div class="">
                                                                <p class="jss798 jss807 ">Email</p>
                                                                <div class="jss550 w-100">
                                                                    <div class="jss567 jss554 jss558 jss568 jss555 select2_con">
                                                                        <select class="select2_con_sec">
                                                                            <option value="">All</option>
                                                                            {% for group_user in instance_EventGroupMembers %}
                                                                        <option value="{{group_user.email}}">{{group_user.email}}</option>
                                                                        {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                           
                                        </div>

                                    </form>
                                </div>

                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="table_parent">
            <table class="table text-center w-100 " id="donor_table">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">Date Time</th>
                        <th scope="col">Name </th>
                        <th scope="col">Email </th>
                        <th scope="col">Mobile No</th>
                        <th scope="col">Address</th>
                        <th scope="col">City</th>
                        <th scope="col">Pincode</th>
                        <th scope="col">State</th>
                        <th scope="col">Facebook</th>
                        <th scope="col">Twitter</th>
                        <th scope="col">View More</th>
                    </tr>
                </thead>
                <tbody>
                    {% for group_user in instance_EventGroupMembers %}
                    <tr>
                        <td>{{group_user.created_at}}</td>
                        <td>{{group_user.name}}</td>
                        <td>{{group_user.email}}</td>
                        <td>{{group_user.phone}}</td>
                        <td>{{group_user.address}}</td>
                        <td>{{group_user.city}}</td>
                        <td>{{group_user.pincode}}</td>
                        <td>{{group_user.state}}</td>
                        <td>{{group_user.facbook}}</td>
                        <td>{{group_user.twitter}}</td>
                        <td> <button class="jss144 btn_none" data-toggle="modal" data-target="#edit_donation__{{group_user.id}}"> <i
                                    class="fa fa-eye" aria-hidden="true"></i> More </button> </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</main>
{% endblock %}


{% block model_popup %}
<div class="modal fade pr-0" id="view_grid" role="dialog" aria-labelledby="view_gridTittle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-md  modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header border-0 pl-4  pb-1">
          <h5 class="modal-title" id="view_gridTittle">Show Columns </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body pt-0 pb-0">
          <form class="jss632">
            <div class="jss550 jss551 jss553">
              <div class="jss550">
                <div class="view_grid_styled-checkbox">
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Date" checked data-column="0"  />
                    <label for="ID_Date">Date Time</label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Name" checked data-column="1" />
                    <label for="ID_Name">Name</label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Email" checked data-column="2"  />
                    <label for="ID_Email">Email</label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Phone" checked data-column="3"  />
                    <label for="ID_Phone">Mobile No</label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Address" data-column="4"  />
                    <label for="ID_Address">Address</label>
                  </div>
                  <div>
                      <input type="checkbox" class="styled-checkbox" id="ID_City" data-column="5"  />
                      <label for="ID_City">City</label>
                    </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Pincode" data-column="6"  />
                    <label for="ID_Pincode">Pincode</label>
                  </div>                  
                  <div>
                      <input type="checkbox" class="styled-checkbox" id="ID_State" data-column="7"  />
                      <label for="ID_State">State</label>
                    </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_fb" data-column="8" />
                    <label for="ID_fb">Facebook </label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_Tw"  data-column="9"/>
                    <label for="ID_Tw">Twitter</label>
                  </div>
                  <div>
                    <input type="checkbox" class="styled-checkbox" id="ID_vm" checked data-column="10" />
                    <label for="ID_vm">View More</label>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>


{% for group_user in instance_EventGroupMembers %}


<div class="modal fade" id="edit_donation__{{group_user.id}}" role="dialog" aria-labelledby="edit_donationTittle" aria-hidden="false"
    data-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable modal-lg  modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header border-0 pl-4  pb-1">
          <h5 class="modal-title" id="edit_donationTittle">Donation Summary</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body withdrawal-modal-body pt-0 pb-0">
          <div class="mt-2">
            <div class="m-auto" style="width: 95%">
                <table class="table">
                    <thead>                
                      <th scope="col" class="border-0 font-weight-bold">Description</th>
                      <th scope="col" class="border-0 font-weight-bold">Value</th>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Date Time</td>
                        <td>{{group_user.created_at}}</td>
                      </tr>
                      <tr>
                        <td>Name</td>
                        <td>{{group_user.name}}</td>
                      </tr>
                      <tr>
                        <td>Email</td>
                        <td>{{group_user.email}}</td>
                      </tr>
                      <tr>
                        <td>Mobile</td>
                        <td>{{group_user.phone}}</td>
                      </tr>                 
                      <tr>
                        <td>Address</td>
                        <td>{{group_user.address}}</td>
                      </tr>
                      <tr>
                        <td>City</td>
                        <td>{{group_user.city}}</td>
                      </tr>
                      <tr>
                        <td>Pincode</td>
                        <td>{{group_user.pincode}}</td>
                      </tr>
    
                      <tr>
                        <td>State</td>
                        <td>{{group_user.state}}</td>
                      </tr>
                       
                      {% if group_user.facbook %}
                      <tr>
                        <td>Facebook Handle</td>
                        <td>{{group_user.facbook}}</td>
                      </tr>
                      {% endif %}
                      {% if group_user.twitter %}
                      <tr>
                        <td>Twitter Handle</td>
                        <td>{{group_user.twitter}}</td>
                      </tr>
                      {% endif %}
                    </tbody>
                  </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
{% endblock %}

{% block extra_script %}
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.flash.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js"></script>
<script>
    $(document).ready(function () {
        $('.select2').select2();

        $('.select2_con_sec').select2({
            dropdownParent: $('.new_dropdown')
        });
    });
    $('#print-assets').empty();
    $('#download').empty();

    $(document).ready(function () {
        var dt = $('#donor_table').DataTable({
            "ordering": false,
            "info": false,
            "dom": 'lrtip'
            // "dom": '<"top"f>',
            // "oLanguage": { "sSearch": '<a class="btn searchBtn" id="searchBtn"><i class="fa fa-search"></i></a>' }
        });

        new $.fn.dataTable.Buttons(dt, {
            buttons: [
                {
                    text: '<i class="fa fa-cloud-download"></i>',
                    extend: 'excel',
                    extension: '.xls'
                }
            ]
        });

        // Add the Export buttons to the toolbox
        dt.buttons(0, null).container().appendTo('#download');


        // Configure Print Button
        new $.fn.dataTable.Buttons(dt, {
            buttons: [
                {
                    text: '<i class="fa fa-print"></i>',
                    extend: 'print'
                }
            ]
        });

        // Add the Print button to the toolbox
        dt.buttons(1, null).container().appendTo('#print-assets');

        $('.styled-checkbox').on( 'change', function (e) {
            // e.preventDefault();   
            // Get the column API object
            var column = dt.column( $(this).attr('data-column') );
     
            // Toggle the visibility
            column.visible( ! column.visible() );
        } );


        $(".view_grid_styled-checkbox .styled-checkbox").each(function( index ) {
          if($( this ).prop("checked") == false){
             
                   // Get the column API object
                   var column = dt.column( $(this).attr('data-column') );
     
                   // Toggle the visibility
                   column.visible( ! column.visible() );
                 }
        });

        $('.select2_con_sec').on('change', function () {
            dt.search(this.value).draw();
        });
    });
</script>
{% endblock %}